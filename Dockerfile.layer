FROM public.ecr.aws/lambda/python:3.11

# Install dependencies into /opt/python (Lambda layer structure)
RUN mkdir -p /opt/python/lib/python3.11/site-packages
RUN pip install snowflake-connector-python -t /opt/python/lib/python3.11/site-packages/

# Create the zip file
WORKDIR /opt
RUN yum install -y zip
RUN zip -r /tmp/snowflake-layer.zip python